PB032
NEW SOLUTION 1
NOTE =================XA
NOTE XA - READ GARBAGE==
LINK 800
LINK 802
LINK 799
GRAB 199
LINK -1
MARK READER
TEST EOF
TJMP ABORT
COPY 1 X
MARK READER_READ
COPY F T
COPY T M
TEST T = -9999
TJMP READER
MARK CONTINUE
TEST EOF
TJMP ABORT
ADDI X 1 X
TEST X > 16
FJMP READER_READ
SEEK -15
JUMP READER
MARK ABORT
COPY -9999 M
NOOP
NOOP
NOOP
KILL
LINK 799
HALT
NOTE =================XB
NOTE XB COPY FILE, ETC==
LINK 800
LINK 802
MARK WRITE
COPY 16 X
MAKE
MARK WRITE_LOOP
NOOP
NOOP
NOOP
NOOP
TEST MRD
FJMP INVALID
COPY M T
COPY T F
TEST T = -9999
FJMP DIGIT
WIPE
NOOP
REPL WRITE
JUMP INVALID
MARK DIGIT
SUBI X 1 X
TEST X > 0
TJMP WRITE_LOOP
NOTE VALIDATE
REPL WRITE
LINK -1
SEEK -9999
COPY 0 X
@REP 8
NOTE ODD
REPL CLAMP
COPY F M
ADDI M X X
NOTE EVEN
ADDI F X X
@END
SWIZ X 0001 T
TJMP INVALID
LINK -1
DROP
HALT
MARK INVALID
WIPE
HALT
MARK CLAMP
COPY M X
MULI X 2 X
TEST X > 9
FJMP DONT_CLAMP
SUBI X 9 X
MARK DONT_CLAMP
COPY X M
NOTE HALT
