PB033
NEW SOLUTION 1
GRAB 300
COPY F X
NOTE PATTERN_INDICES
LINK 800
DROP
LINK 801
NOTE INDEX FILE
GRAB 200
MARK FIND_PATTERN_I
TEST F = X
FJMP FIND_PATTERN_I
COPY 10 T
REPL COPY_PATTERN
MARK READ_PATTERN_I
SUBI T 1 T
COPY F M
TJMP READ_PATTERN_I
HALT
MARK COPY_PATTERN
MAKE
MARK COPY_PATTERN_LOOP
SUBI T 1 T
COPY M F
TJMP COPY_PATTERN_LOOP
LINK -1
DROP
NOTE 400 = PATTERN SEQ
GRAB 300
SEEK 1
COPY F X
WIPE
NOTE 300 DNE
LINK 801
GRAB 200
MARK FIND_TARGET_I
TEST F = X
FJMP FIND_TARGET_I
COPY 10 T
REPL COPY_TARGET
MARK READ_TARGET_I
SUBI T 1 T
COPY F M
TJMP READ_TARGET_I
HALT
MARK COPY_TARGET
MAKE
NOTE 401 = TARGET CLONE
MARK COPY_TARGET_LOOP
SUBI T 1 T
COPY M F
TJMP COPY_TARGET_LOOP
LINK -1
REPL TX_PATTERN
REPL WRITER
LINK -1
NOTE FALLTHROUGH TX_TARG
SEEK -9999
MARK TX_TARGET
COPY F M
JUMP TX_TARGET
MARK TX_PATTERN
GRAB 400
MARK TX_PATTERN_L
COPY F M
JUMP TX_PATTERN_L
MARK WRITER
MARK WRITER_LOOP
TEST MRD
FJMP CLEANUP
COPY M X
NOTE STACK INDEX
SWIZ X 0003 T
ADDI 800 T T
LINK T
REPL COPY_SEQ_PATTERN
NOTE FILE ID
SWIZ X 0002 T
ADDI 200 T T
GRAB T
NOTE OFFSET SEEK
SWIZ X 0001 T
MULI 10 T T
SEEK T
NOTE FALLTHROUGH READ_SE
MARK READ_SEQ_PATTERN
COPY F M
JUMP READ_SEQ_PATTERN
MARK COPY_SEQ_PATTERN
COPY 10 T
MAKE
MARK COPY_SEQ_PATTERN_L
COPY M F
SUBI T 1 T
TJMP COPY_SEQ_PATTERN_L
KILL
LINK -1
LINK -1
COPY M X
NOTE TARGET OVERWRITE
SWIZ X 0003 T
ADDI 800 T T
LINK 800
LINK T
REPL WRITE_SEQ_TARGET
SEEK -9999
MARK READ_SEQ_TARGET
COPY F M
TEST EOF
FJMP READ_SEQ_TARGET
WIPE
KILL
LINK -1
JUMP WRITER_LOOP
MARK WRITE_SEQ_TARGET
NOTE FILE ID
SWIZ X 0002 T
ADDI 200 T T
GRAB T
NOTE OFFSET SEEK
SWIZ X 0001 T
MULI T 10 T
SEEK T
MARK WRITE_SEQ_TARGET_L
COPY M F
JUMP WRITE_SEQ_TARGET_L
MARK CLEANUP
GRAB 400
WIPE
LINK -1
GRAB 401
WIPE
